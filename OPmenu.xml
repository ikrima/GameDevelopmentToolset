<menuDocument>
  <!-- menuDocument can only contain 1 menu element, whose id is 
         implicitly "root_menu"
      -->
  <menu>
    <scriptItem id="expreditor_edit_python_code">
      <label>Edit python source code</label>
      <context>
        <expression>
          <![CDATA[
try:
  import houdini_external_editor
  return houdini_external_editor.is_python_node(kwargs["node"])
except Exception as e:
  return False]]>
        </expression>
      </context>
      <scriptCode>
        <![CDATA[
import houdini_external_editor
reload(houdini_external_editor)
houdini_external_editor.add_watcher(kwargs["node"], type_="python_node")]]>
      </scriptCode>
    </scriptItem>

    <scriptItem id="expreditor_edit_extra_sections">
      <label>Edit Extra Sections Source Code</label>
      <context>
        <expression>
          <![CDATA[
try:
  import os
  if os.environ.get("HOUDINI_EXPR_DISABLE_SECTIONS") == "1":
    return False
  import houdini_external_editor
  return len(houdini_external_editor.get_extra_file_scripts(kwargs["node"])) > 0
except Exception as e:
  return False]]>
        </expression>
      </context>
      <scriptCode>
        <![CDATA[
import houdini_external_editor
reload(houdini_external_editor)
houdini_external_editor.add_watcher_to_section(kwargs["node"])]]>
      </scriptCode>
    </scriptItem>

  </menu>
</menuDocument>